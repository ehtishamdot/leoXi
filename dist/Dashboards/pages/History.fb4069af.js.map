{"mappings":"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","sources":["Dashboards/assets/js/firebase/init.js","Dashboards/assets/js/helpers.js","Dashboards/assets/js/view/view.js","Dashboards/assets/js/view/historyView.js","Dashboards/assets/js/functions/history.js","Dashboards/assets/js/view/requestView.js","Dashboards/assets/js/functions/requests.js","Dashboards/assets/js/functions/State.js","Dashboards/assets/js/functions/userStats.js","Dashboards/assets/js/controller.js"],"sourcesContent":["import { initializeApp } from \"firebase/app\";\r\nimport { getAnalytics } from \"firebase/analytics\";\r\nimport {\r\n  getFirestore,\r\n  collection,\r\n  addDoc,\r\n  setDoc,\r\n  doc,\r\n  getDocs,\r\n  getDoc,\r\n} from \"firebase/firestore\";\r\n\r\nimport firebase from \"firebase/app\";\r\nimport \"firebase/database\";\r\n//For auth\r\nimport {\r\n  getAuth,\r\n  GoogleAuthProvider,\r\n  signInWithPopup,\r\n  signOut,\r\n  onAuthStateChanged,\r\n} from \"firebase/auth\";\r\nimport {\r\n  getDatabase,\r\n  orderByChild,\r\n  ref,\r\n  equalTo,\r\n  Database,\r\n  set,\r\n  child,\r\n  update,\r\n  push,\r\n  remove,\r\n  get,\r\n} from \"firebase/database\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyBKayAlMLGl1ZGSDeQS5ctYu4WZLTp4xoo\",\r\n  authDomain: \"leoxi-c5242.firebaseapp.com\",\r\n  projectId: \"leoxi-c5242\",\r\n  storageBucket: \"leoxi-c5242.appspot.com\",\r\n  messagingSenderId: \"898565041070\",\r\n  appId: \"1:898565041070:web:4f65a22bd92cb48177363f\",\r\n  measurementId: \"G-J4KFEPQF1N\",\r\n};\r\n\r\n// Initialize Firebase\r\nconst app = initializeApp(firebaseConfig);\r\nconst analytics = getAnalytics(app);\r\n\r\n// Initialize Auth\r\nconst auth = getAuth();\r\n\r\n// Initialize Database\r\nconst db = getFirestore();\r\nconst database = getDatabase();\r\n\r\n// Initialize Google Auth Provider\r\nlet provider = new GoogleAuthProvider();\r\n\r\nexport {\r\n  auth,\r\n  database,\r\n  provider,\r\n  signInWithPopup,\r\n  signOut,\r\n  onAuthStateChanged,\r\n  db,\r\n  collection,\r\n  addDoc,\r\n  setDoc,\r\n  doc,\r\n  getDocs,\r\n  getDoc,\r\n  ref,\r\n  set,\r\n  child,\r\n  update,\r\n  push,\r\n  remove,\r\n  get,\r\n};\r\n\r\nconst a = async () => {\r\n  const querySnapshot2 = await getDocs(collection(db, \"notifications\"));\r\n\r\n  querySnapshot2.forEach((doc) => {\r\n    console.log(doc.data());\r\n  });\r\n};\r\n","//firebase\r\nimport { async } from \"regenerator-runtime\";\r\nimport * as firebase from \"../js/firebase/init\";\r\n\r\n\r\n\r\n\r\nexport const updateRT_FB = async (Loc, data) => {\r\n  await firebase.update(firebase.ref(firebase.database, Loc), data);\r\n};\r\n\r\nexport const removeRT_FB = async (Loc) => {\r\n  await firebase.remove(firebase.ref(firebase.database, Loc));\r\n};\r\n\r\nexport const getRT_FB = async (Loc) => {\r\n  const dbRef = firebase.ref(firebase.database);\r\n  return await firebase.get(firebase.child(dbRef, Loc));\r\n};\r\n\r\nexport const setRT_FB = async (Loc, data) => {\r\n  await firebase.set(firebase.ref(firebase.database, Loc), data);\r\n};\r\n\r\nvar crypto = require(\"crypto\");\r\n\r\nexport function encrypt(key, data) {\r\n  var cipher = crypto.createCipher(\"aes-256-cbc\", key);\r\n  var crypted = cipher.update(data, \"utf-8\", \"hex\");\r\n  crypted += cipher.final(\"hex\");\r\n\r\n  return crypted;\r\n}\r\n\r\nexport function decrypt(key, data) {\r\n  var decipher = crypto.createDecipher(\"aes-256-cbc\", key);\r\n  var decrypted = decipher.update(data, \"hex\", \"utf-8\");\r\n  decrypted += decipher.final(\"utf-8\");\r\n\r\n  return decrypted;\r\n}\r\n","export class View {\r\n  _userInfo;\r\n  _coinsInfo;\r\n  _mod;\r\n\r\n  render(data, coinsInfo, mod) {\r\n    this._mod = mod;\r\n    this._userInfo = data;\r\n    this._coinsInfo = coinsInfo;\r\n    this._renderMarkup();\r\n  }\r\n\r\n  _renderMarkup() {\r\n    const html = this._generateMarkup();\r\n    this.renderClear();\r\n    this._parentEl.insertAdjacentHTML(\"beforeend\", html);\r\n  }\r\n\r\n  _generateMarkup() {}\r\n\r\n  renderSpinner(parentEl) {\r\n    const markup = ` \r\n     <div class=\"lds-dual-ring\"></div>`;\r\n    console.log(parentEl);\r\n    document.querySelector(parentEl).insertAdjacentHTML(\"afterbegin\", markup);\r\n  }\r\n\r\n  _renderSetting() {}\r\n\r\n  renderMessage() {}\r\n\r\n  renderErrorMessage() {}\r\n\r\n  renderMarkup() {}\r\n\r\n  removeHidden() {\r\n    this._parentEl.classList.remove(\"hidden\");\r\n    console.log(this._parentEl);\r\n  }\r\n\r\n  addHidden() {\r\n    this._parentEl.classList.add(\"hidden\");\r\n    console.log(this._parentEl);\r\n  }\r\n\r\n  renderClear() {\r\n    this._parentEl.innerHTML = \"\";\r\n  }\r\n\r\n  renderChildClear() {\r\n    this._parentChildEL.innerHTML = \"\";\r\n  }\r\n}\r\n","import { View } from \"./view\";\r\n\r\nclass RequestOverlay extends View {\r\n  sendedRequestMarkupSell(data) {\r\n    const html = `\r\n              <tr>\r\n                        <td>\r\n                          <div class=\"d-flex px-2 py-1\">\r\n                            <div>\r\n                              <img\r\n                                src=\"${data.imageURL}\"\r\n                                class=\"avatar avatar-sm me-3\"\r\n                                alt=\"user1\"\r\n                              />\r\n                            </div>\r\n                            <div\r\n                              class=\"d-flex flex-column justify-content-center\"\r\n                            >\r\n                              <h6 class=\"mb-0 text-sm\">${data.name}</h6>\r\n                              <p class=\"text-xs text-secondary mb-0\">\r\n                                ${data.email}\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n                        <td>\r\n                          <p class=\"text-xs font-weight-bold mb-0\">${data.coins} coins</p>\r\n                          <p class=\"text-xs text-secondary mb-0\">${data.coins}$</p>\r\n                        </td>\r\n                        <td class=\"align-middle text-center text-sm\">\r\n                          <span class=\"badge badge-sm bg-gradient-secondary\"\r\n                            >Active</span\r\n                          >\r\n                        </td>\r\n                        <td class=\"align-middle text-center\">\r\n                          <span class=\"text-secondary text-xs font-weight-bold\"\r\n                            > ${data.uploadDate}</span\r\n                          >\r\n                        </td>\r\n                        <td class=\"align-middle\">\r\n                          <a\r\n                            href=\"javascript:;\"\r\n                            class=\"text-secondary font-weight-bold text-xs\"\r\n                            data-toggle=\"tooltip\"\r\n                            data-original-title=\"Edit user\"\r\n                          >\r\n                            Sell\r\n                          </a>\r\n                        </td>\r\n                      </tr>\r\n        `;\r\n\r\n    document\r\n      ?.querySelector(\".sended-requests--sell\")\r\n      ?.insertAdjacentHTML(\"afterbegin\", html);\r\n  }\r\n\r\n  sendedRequestMarkupBuy(data) {\r\n    const html = `\r\n              <tr>\r\n                        <td>\r\n                          <div class=\"d-flex px-2 py-1\">\r\n                            <div>\r\n                              <img\r\n                                src=\"${data.imageURL}\"\r\n                                class=\"avatar avatar-sm me-3\"\r\n                                alt=\"user1\"\r\n                              />\r\n                            </div>\r\n                            <div\r\n                              class=\"d-flex flex-column justify-content-center\"\r\n                            >\r\n                              <h6 class=\"mb-0 text-sm\">${data.name}</h6>\r\n                              <p class=\"text-xs text-secondary mb-0\">\r\n                                ${data.email}\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n                        <td>\r\n                          <p class=\"text-xs font-weight-bold mb-0\">${data.coins} coins</p>\r\n                          <p class=\"text-xs text-secondary mb-0\">${data.coins}$</p>\r\n                        </td>\r\n                        <td class=\"align-middle text-center text-sm\">\r\n                          <span class=\"badge badge-sm bg-gradient-success\"\r\n                            >Active</span\r\n                          >\r\n                        </td>\r\n                        <td class=\"align-middle text-center\">\r\n                          <span class=\"text-secondary text-xs font-weight-bold\"\r\n                            > ${data.uploadDate}</span\r\n                          >\r\n                        </td>\r\n                        <td class=\"align-middle\">\r\n                          <a\r\n                            href=\"javascript:;\"\r\n                            class=\"text-secondary font-weight-bold text-xs\"\r\n                            data-toggle=\"tooltip\"\r\n                            data-original-title=\"Edit user\"\r\n                          >\r\n                            Buy\r\n                          </a>\r\n                        </td>\r\n                      </tr>\r\n        `;\r\n\r\n    document\r\n      ?.querySelector(\".sended-requests--buy\")\r\n      ?.insertAdjacentHTML(\"afterbegin\", html);\r\n  }\r\n\r\n  recievedRequestMarkupSell(data) {\r\n    const html = `\r\n              <tr>\r\n                        <td>\r\n                          <div class=\"d-flex px-2 py-1\">\r\n                            <div>\r\n                              <img\r\n                                src=\"${data.imageURL}\"\r\n                                class=\"avatar avatar-sm me-3\"\r\n                                alt=\"user1\"\r\n                              />\r\n                            </div>\r\n                            <div\r\n                              class=\"d-flex flex-column justify-content-center\"\r\n                            >\r\n                              <h6 class=\"mb-0 text-sm\">${data.name}</h6>\r\n                              <p class=\"text-xs text-secondary mb-0\">\r\n                                ${data.email}\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n                        <td>\r\n                          <p class=\"text-xs font-weight-bold mb-0\">${data.coins} coins</p>\r\n                          <p class=\"text-xs text-secondary mb-0\">${data.coins}$</p>\r\n                        </td>\r\n                        <td class=\"align-middle text-center text-sm\">\r\n                          <span class=\"badge badge-sm bg-gradient-secondary\"\r\n                            >Active</span\r\n                          >\r\n                        </td>\r\n                        <td class=\"align-middle text-center\">\r\n                          <span class=\"text-secondary text-xs font-weight-bold\"\r\n                            > ${data.uploadDate}</span\r\n                          >\r\n                        </td>\r\n                        <td class=\"align-middle\">\r\n                          <a\r\n                            href=\"javascript:;\"\r\n                            class=\"text-secondary font-weight-bold text-xs\"\r\n                            data-toggle=\"tooltip\"\r\n                            data-original-title=\"Edit user\"\r\n                          >\r\n                            Sell\r\n                          </a>\r\n                        </td>\r\n                      </tr>\r\n        `;\r\n\r\n    document\r\n      ?.querySelector(\".recieved__requests--sell\")\r\n      ?.insertAdjacentHTML(\"afterbegin\", html);\r\n  }\r\n\r\n  recievedRequestMarkupBuy(data) {\r\n    const html = `\r\n              <tr>\r\n                        <td>\r\n                          <div class=\"d-flex px-2 py-1\">\r\n                            <div>\r\n                              <img\r\n                                src=\"${data.imageURL}\"\r\n                                class=\"avatar avatar-sm me-3\"\r\n                                alt=\"user1\"\r\n                              />\r\n                            </div>\r\n                            <div\r\n                              class=\"d-flex flex-column justify-content-center\"\r\n                            >\r\n                              <h6 class=\"mb-0 text-sm\">${data.name}</h6>\r\n                              <p class=\"text-xs text-secondary mb-0\">\r\n                                ${data.email}\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n                        <td>\r\n                          <p class=\"text-xs font-weight-bold mb-0\">${data.coins} coins</p>\r\n                          <p class=\"text-xs text-secondary mb-0\">${data.coins}$</p>\r\n                        </td>\r\n                        <td class=\"align-middle text-center text-sm\">\r\n                          <span class=\"badge badge-sm bg-gradient-success\"\r\n                            >Active</span\r\n                          >\r\n                        </td>\r\n                        <td class=\"align-middle text-center\">\r\n                          <span class=\"text-secondary text-xs font-weight-bold\"\r\n                            > ${data.uploadDate}</span\r\n                          >\r\n                        </td>\r\n                        <td class=\"align-middle\">\r\n                          <a\r\n                            href=\"javascript:;\"\r\n                            class=\"text-secondary font-weight-bold text-xs\"\r\n                            data-toggle=\"tooltip\"\r\n                            data-original-title=\"Edit user\"\r\n                          >\r\n                            Buy\r\n                          </a>\r\n                        </td>\r\n                      </tr>\r\n        `;\r\n\r\n    document\r\n      ?.querySelector(\".recieved__requests--buy\")\r\n      ?.insertAdjacentHTML(\"afterbegin\", html);\r\n  }\r\n}\r\n\r\nexport default new RequestOverlay();\r\n","//firebase\r\nimport * as firebase from \"../firebase/init\";\r\n\r\n//Model\r\nimport * as model from \"../model\";\r\n\r\n//view\r\nimport historyView from \"../view/historyView\";\r\n\r\n//helpers\r\nimport * as helper from \"../../../../src/js/helpers\";\r\nimport * as helper from \"../../../../src/js/constants\";\r\nimport { async } from \"regenerator-runtime\";\r\n\r\nexport const retrieveData = async (data) => {\r\n  //sended requests Sell\r\n  sellingSendedRequests(data);\r\n  //sended requests buy\r\n  buyingSendedRequests(data);\r\n  //recieved requests Sell\r\n  sellingRecievedRequests(data);\r\n  //recieved requests buy\r\n  buyingRecievedRequests(data);\r\n};\r\n\r\nconst sellingSendedRequests = async (data) => {\r\n  const querySnapshot = await firebase.getDocs(\r\n    firebase.collection(\r\n      firebase.db,\r\n      \"history\",\r\n      \"requestSended\",\r\n      \"sellRequest\",\r\n      data.uid,\r\n      \"requests\"\r\n    )\r\n  );\r\n\r\n  querySnapshot.forEach((doc) => {\r\n    historyView.sendedRequestMarkupSell(doc.data());\r\n  });\r\n};\r\n\r\nconst buyingSendedRequests = async (data) => {\r\n  const querySnapshot = await firebase.getDocs(\r\n    firebase.collection(\r\n      firebase.db,\r\n      \"history\",\r\n      \"requestSended\",\r\n      \"buyRequest\",\r\n      data.uid,\r\n      \"requests\"\r\n    )\r\n  );\r\n\r\n  querySnapshot.forEach((doc) => {\r\n    historyView.sendedRequestMarkupBuy(doc.data());\r\n  });\r\n};\r\n\r\nconst sellingRecievedRequests = async (data) => {\r\n  const querySnapshot = await firebase.getDocs(\r\n    firebase.collection(\r\n      firebase.db,\r\n      \"history\",\r\n      \"requestRecieved\",\r\n      \"sellRequest\",\r\n      data.uid,\r\n      \"requests\"\r\n    )\r\n  );\r\n\r\n  querySnapshot.forEach((doc) => {\r\n    historyView.recievedRequestMarkupSell(doc.data());\r\n  });\r\n};\r\nconst buyingRecievedRequests = async (data) => {\r\n  const querySnapshot = await firebase.getDocs(\r\n    firebase.collection(\r\n      firebase.db,\r\n      \"history\",\r\n      \"requestRecieved\",\r\n      \"buyRequest\",\r\n      data.uid,\r\n      \"requests\"\r\n    )\r\n  );\r\n\r\n  querySnapshot.forEach((doc) => {\r\n    historyView.recievedRequestMarkupBuy(doc.data());\r\n  });\r\n};\r\n","import { View } from \"./view\";\r\n\r\nclass RequestOverlay extends View {\r\n  requestMarkupSell(data, coins) {\r\n    const html = `\r\n              <tr>\r\n                        <td>\r\n                          <div class=\"d-flex px-2 py-1\">\r\n                            <div>\r\n                              <img\r\n                                src=\"${data.imageURL}\"\r\n                                class=\"avatar avatar-sm me-3\"\r\n                                alt=\"user1\"\r\n                              />\r\n                            </div>\r\n                            <div\r\n                              class=\"d-flex flex-column justify-content-center\"\r\n                            >\r\n                              <h6 class=\"mb-0 text-sm\">${data.name}</h6>\r\n                              \r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n                        <td>\r\n                          <p class=\"text-sm font-weight-bold mb-0\">${coins}</p>\r\n                        </td>\r\n                        <td>\r\n                          <p class=\"text-sm font-weight-bold mb-0\">${coins}$</p>\r\n                        </td>\r\n                        <td class=\"align-middle text-center text-sm\">\r\n                          <span class=\"badge badge-sm bg-gradient-secondary\"\r\n                            >Active</span\r\n                          >\r\n                        </td>\r\n                        <td class=\"align-middle text-center\">\r\n                          <span class=\"text-secondary text-xs font-weight-bold\"\r\n                            > ${data.uploadDate}</span\r\n                          >\r\n                        </td>\r\n                        <td class=\"align-middle\">\r\n                          <a\r\n                            href=\"javascript:;\"\r\n                            class=\"text-secondary request-status--btn font-weight-bold text-xs\"\r\n                            data-toggle=\"tooltip\"\r\n                            data-original-title=\"Edit user\"\r\n                            data-status = \"1\"\r\n                            data-sendTo = \"${data.sendTo}\" \r\n                            data-sendFrom = \"${data.sendFrom}\"\r\n                            data-todo = \"requestSell\"\r\n                          >\r\n                            Accept\r\n                          </a>\r\n                        </td>\r\n                        <td class=\"align-middle\">\r\n                          <a\r\n                            href=\"javascript:;\"\r\n                            class=\"text-secondary request-status--btn font-weight-bold text-xs\"\r\n                            data-toggle=\"tooltip\"\r\n                            data-original-title=\"Edit user\"\r\n                            data-status = \"0\"\r\n                            data-sendTo = \"${data.sendTo}\"\r\n                            data-sendFrom = \"${data.sendFrom}\"\r\n                            data-todo = \"requestSell\"\r\n                          >\r\n                            Reject\r\n                          </a>\r\n                        </td>\r\n                      </tr>\r\n        `;\r\n\r\n    document\r\n      ?.querySelector(\".selling-requests\")\r\n      ?.insertAdjacentHTML(\"afterbegin\", html);\r\n  }\r\n\r\n  requestMarkupBuy(data, coins) {\r\n    const html = `\r\n              <tr>\r\n                        <td>\r\n                          <div class=\"d-flex px-2 py-1\">\r\n                            <div>\r\n                              <img\r\n                                src=\"${data.imageURL}\"\r\n                                class=\"avatar avatar-sm me-3\"\r\n                                alt=\"user1\"\r\n                              />\r\n                            </div>\r\n                            <div\r\n                              class=\"d-flex flex-column justify-content-center\"\r\n                            >\r\n                              <h6 class=\"mb-0 text-sm\">${data.name}</h6>\r\n                              \r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n                         <td>\r\n                          <p class=\"text-sm font-weight-bold mb-0\">${coins}</p>\r\n                        </td>\r\n                        <td>\r\n                          <p class=\"text-sm font-weight-bold mb-0\">${coins}$</p>\r\n                        </td>\r\n                        <td class=\"align-middle text-center text-sm\">\r\n                          <span class=\"badge badge-sm bg-gradient-success\"\r\n                            >Active</span\r\n                          >\r\n                        </td>\r\n                        <td class=\"align-middle text-center\">\r\n                          <span class=\"text-secondary text-xs font-weight-bold\"\r\n                            > ${data.uploadDate}</span\r\n                          >\r\n                        </td>\r\n                         <td class=\"align-middle\">\r\n                          <a\r\n                            href=\"javascript:;\"\r\n                            class=\"text-secondary request-status--btn font-weight-bold text-xs\"\r\n                            data-toggle=\"tooltip\"\r\n                            data-original-title=\"Edit user\"\r\n                            data-status = \"1\"\r\n                             data-sendTo = \"${data.sendTo}\"\r\n                             data-sendFrom = \"${data.sendFrom}\"\r\n                             data-todo = \"requestBuy\"\r\n                          >\r\n                            Accept\r\n                          </a>\r\n                        </td>\r\n                        <td class=\"align-middle\">\r\n                          <a\r\n                            href=\"javascript:;\"\r\n                            class=\"text-secondary request-status--btn font-weight-bold text-xs\"\r\n                            data-toggle=\"tooltip\"\r\n                            data-original-title=\"Edit user\"\r\n                            data-status = \"0\"\r\n                            data-sendTo = \"${data.sendTo}\"\r\n                            data-sendFrom = \"${data.sendFrom}\"\r\n                            data-todo = \"requestBuy\"\r\n                          >\r\n                            Reject\r\n                          </a>\r\n                        </td>\r\n                      </tr>\r\n        `;\r\n\r\n    document\r\n      ?.querySelector(\".buying-requests\")\r\n      ?.insertAdjacentHTML(\"afterbegin\", html);\r\n  }\r\n\r\n  renderSetting = (node) => {\r\n    node.remove();\r\n  };\r\n\r\n  controlRequestStatusBuy = (handler) => {\r\n    document.querySelector(\"body\").addEventListener(\"click\", (e) => {\r\n      const btn = e.target.closest(\".request-status--btn\");\r\n      if (!btn) return;\r\n      // e.target.parentNode.parentNode.style.display = \"none;\r\n      handler(\r\n        {\r\n          status: e.target.dataset?.status,\r\n          sendTo: e.target.dataset?.sendto,\r\n          sendFrom: e.target.dataset?.sendfrom,\r\n          toDo: e.target.dataset?.todo,\r\n        },\r\n        e.target.parentNode.parentNode\r\n      );\r\n    });\r\n  };\r\n}\r\n\r\nexport default new RequestOverlay();\r\n","//firebase\r\nimport * as firebase from \"../../../../src/js/firebase/init\";\r\n\r\n//Model\r\nimport * as model from \"../model\";\r\n\r\n//view\r\nimport requestView from \"../view/requestView\";\r\n\r\n//helpers\r\nimport * as helper from \"../../../../src/js/helpers\";\r\nimport * as constant from \"../../../../src/js/constants\";\r\nimport { async } from \"regenerator-runtime\";\r\n\r\nexport const retrieveData = async (data) => {\r\n  //requests Sell\r\n  sellingRequests(data);\r\n  // requests buy\r\n  buyingRequests(data);\r\n};\r\n\r\nconst sellingRequests = async (data) => {\r\n  var ref = firebase.collection(\r\n    firebase.db,\r\n    \"notifications\",\r\n    data.uid,\r\n    \"requestSell\"\r\n  );\r\n  const docSnap = await firebase.getDocs(ref);\r\n  docSnap.forEach((doc) => {\r\n    console.log(doc.data().coins);\r\n    requestView.requestMarkupSell(\r\n      doc.data(),\r\n      helper.decrypt(constant.KEY, doc.data().coins)\r\n    );\r\n  });\r\n};\r\n\r\nconst buyingRequests = async (data) => {\r\n  var ref = firebase.collection(\r\n    firebase.db,\r\n    \"notifications\",\r\n    data.uid,\r\n    \"requestBuy\"\r\n  );\r\n  const docSnap = await firebase.getDocs(ref);\r\n  docSnap.forEach((doc) => {\r\n    console.log(doc.data().coins);\r\n    requestView.requestMarkupBuy(\r\n      doc.data(),\r\n      helper.decrypt(constant.KEY, doc.data().coins)\r\n    );\r\n  });\r\n};\r\n\r\nexport const controlRequestBuy = async (data, node) => {\r\n  if (\r\n    data.sendFrom === undefined &&\r\n    data.sendFrom === \"undefined\" &&\r\n    data.sendTo === undefined &&\r\n    data.sendTo === \"undefined\"\r\n  )\r\n    return;\r\n\r\n  let ref = firebase.doc(firebase.db, \"userCoins\", data.sendTo);\r\n  let ref2 = firebase.doc(\r\n    firebase.db,\r\n    \"notifications\",\r\n    data.sendTo,\r\n    \"requestSell\",\r\n    data.sendFrom\r\n  );\r\n  const doc = await firebase.getDoc(ref);\r\n  const doc2 = await firebase.getDoc(ref2);\r\n\r\n  if (\r\n    doc.data()?.coins === undefined &&\r\n    doc.data().coins === null &&\r\n    doc2.data()?.coins === undefined &&\r\n    doc2.data().coins === null\r\n  )\r\n    return;\r\n\r\n  if (Number(data.status)) {\r\n    let calVal =\r\n      Number(helper.decrypt(constant.KEY, doc.data()?.coins)) +\r\n      Number(helper.decrypt(constant.KEY, doc2.data()?.coins));\r\n    await firebase.updateDoc(\r\n      firebase.doc(firebase.db, \"userCoins\", data.sendTo),\r\n      {\r\n        coins: helper.encrypt(constant.KEY, \"\" + calVal),\r\n      }\r\n    );\r\n    await firebase.deleteDoc(ref2);\r\n    requestView.renderSetting(node);\r\n  } else {\r\n    await firebase.updateDoc(\r\n      firebase.doc(firebase.db, \"userCoins\", data.sendTo),\r\n      {\r\n        coins: doc.data().prevCoins,\r\n      }\r\n    );\r\n    await firebase.deleteDoc(ref2);\r\n    requestView.renderSetting(node);\r\n  }\r\n};\r\n\r\nexport const controlRequestSell = async (data, node) => {\r\n  if (\r\n    data.sendFrom === undefined &&\r\n    data.sendFrom === \"undefined\" &&\r\n    data.sendTo === undefined &&\r\n    data.sendTo === \"undefined\"\r\n  )\r\n    return;\r\n\r\n  let ref = firebase.doc(firebase.db, \"userCoins\", data.sendTo);\r\n  let ref2 = firebase.doc(\r\n    firebase.db,\r\n    \"notifications\",\r\n    data.sendTo,\r\n    \"requestBuy\",\r\n    data.sendFrom\r\n  );\r\n  const doc = await firebase.getDoc(ref);\r\n  const doc2 = await firebase.getDoc(ref2);\r\n  const doc3 = await firebase.getDoc(\r\n    firebase.doc(firebase.db, \"userCoins\", data.sendFrom)\r\n  );\r\n\r\n  if (Number(data.status)) {\r\n    let calVal =\r\n      Number(helper.decrypt(constant.KEY, doc.data().coins)) -\r\n      Number(helper.decrypt(constant.KEY, doc2.data().coins));\r\n    await firebase.updateDoc(\r\n      firebase.doc(firebase.db, \"userCoins\", data.sendTo),\r\n      {\r\n        coins: helper.encrypt(constant.KEY, \"\" + calVal),\r\n      }\r\n    );\r\n\r\n    let calVal2 =\r\n      Number(helper.decrypt(constant.KEY, doc3.data().coins)) +\r\n      Number(helper.decrypt(constant.KEY, doc2.data().coins));\r\n\r\n    await firebase.updateDoc(\r\n      firebase.doc(firebase.db, \"userCoins\", data.sendFrom),\r\n      {\r\n        coins: helper.encrypt(constant.KEY, \"\" + calVal2),\r\n      }\r\n    );\r\n\r\n    console.log(Number(helper.decrypt(constant.KEY, doc3.data().coins)));\r\n\r\n    await firebase.deleteDoc(ref2);\r\n    requestView.renderSetting(node);\r\n  } else {\r\n    await firebase.updateDoc(\r\n      firebase.doc(firebase.db, \"userCoins\", data.sendTo),\r\n      {\r\n        coins: doc.data().prevCoins,\r\n      }\r\n    );\r\n    await firebase.deleteDoc(ref2);\r\n    requestView.renderSetting(node);\r\n  }\r\n};\r\n\r\n// key = \"123|a123123123123123\";\r\n// const datas = async (data) => {\r\n//   var ref = firebase.collection(firebase.db, \"users\");\r\n//   const docSnap = await firebase.getDocs(ref);\r\n//   docSnap.forEach((doc) => {\r\n//     let refCoin = firebase.doc(firebase.db, \"userCoins\", doc.data().id);\r\n//     // console.log(doc.data());\r\n//     let encstring = helper.encrypt(key, \"\" + doc.data().coins);\r\n//     // let decstring = crptr.decrypt(encstring);\r\n//     console.log(encstring);\r\n//     // console.log(decstring);\r\n//     firebase.setDoc(refCoin, {\r\n//       coins: encstring,\r\n//     });\r\n//   });\r\n// };\r\n\r\n// const datas = async (data) => {\r\n//   var ref = firebase.collection(firebase.db, \"userCoins\");\r\n//   const docSnap = await firebase.getDocs(ref);\r\n//   docSnap.forEach((doc) => {\r\n//     console.log(doc.data().coins);\r\n//     // let encstring = helper.encrypt(key, \"\" + doc.data().coins);\r\n//     let decstring = helper.decrypt(constant.KEY, doc.data().coins);\r\n//     // console.log(encstring);\r\n//     console.log(decstring);\r\n//   });\r\n// };\r\n","//firebase\r\nimport * as firebase from \"../firebase/init\";\r\n\r\n//Model\r\nimport * as model from \"../model\";\r\n\r\n//functions\r\nimport * as userState from \"./userStats\";\r\nimport * as history from \"./history\";\r\nimport * as requests from \"./requests\";\r\n\r\nexport const controlAuthState = async () => {\r\n  await firebase.onAuthStateChanged(firebase.auth, (user) => {\r\n    if (user) {\r\n      //user data from Firebase\r\n      userState.userStats(user);\r\n      history.retrieveData(user);\r\n      requests.retrieveData(user);\r\n    } else {\r\n    }\r\n  });\r\n};\r\n","//model\r\nimport * as model from \"../model\";\r\n\r\n//firebase\r\nimport * as firebase from \"../firebase/init\";\r\n\r\n//functions\r\n\r\n//helper\r\nimport * as helper from \"../helpers\";\r\n\r\nexport const userStats = async (data) => {\r\n  console.log(data.uid);\r\n  const snapshot = await helper.getRT_FB(\"users/\" + data.uid);\r\n  const coinValue = await helper.getRT_FB(\"coinValue\");\r\n  const userHistory = await helper.getRT_FB(\"userHistory/\" + data.uid);\r\n  console.log(coinValue.val().value);\r\n  const money = coinValue.val().value * snapshot.val().coins;\r\n  // document.querySelector(\".current-money\").textContent = `$${money}`;\r\n  // document.querySelector(\".coins-value\").textContent = `${\r\n  //   snapshot.val().coins\r\n  // }`;\r\n  // document.querySelector(\".alltime-income\").textContent = `$${\r\n  //   userHistory.val().totalIncome\r\n  // }`;\r\n  // document.querySelector(\".total-trades\").textContent = `${\r\n  //   snapshot.val().totalTrades\r\n  // }`;\r\n};\r\n","//Model\r\nimport * as model from \"./model\";\r\n\r\n//Functions\r\nimport * as state from \"./functions/State\";\r\nimport * as history from \"./functions/history\";\r\nimport * as requests from \"./functions/requests\";\r\n\r\n//Helpers\r\nimport * as Helpers from \"./helpers\";\r\n\r\n//view\r\nimport requestView from \"./view/requestView\";\r\n\r\n// ----------------- Control ADD Event Listeners\r\n\r\n(() => {\r\n  state.controlAuthState();\r\n  requestView.controlRequestStatusBuy(requests.controlRequestBuy);\r\n})();\r\n"],"names":["$d036febf3324b785$var$app","$j1HNW","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","$d036febf3324b785$export$6d5e6884cf45b081","$avCtq","getAnalytics","$58lYo","getAuth","$d036febf3324b785$export$4d61dd28ad41ec2c","$6k2Gr","getFirestore","$d036febf3324b785$export$e3c7ca2934e13db4","$6VvtN","getDatabase","GoogleAuthProvider","$51896945904b522b$export$6a5a2c22c9fe5f1a","async","Loc","dbRef","ref","get","child","$78815e040a5286d2$export$ee39aefc8ac7973d","_userInfo","_coinsInfo","_mod","render","data","coinsInfo","mod","_renderMarkup","html","this","_generateMarkup","renderClear","_parentEl","insertAdjacentHTML","renderSpinner","parentEl","console","log","document","querySelector","_renderSetting","renderMessage","renderErrorMessage","renderMarkup","removeHidden","classList","remove","addHidden","add","innerHTML","renderChildClear","_parentChildEL","$d68baae77508de6b$export$9099ad97b570f7c","sendedRequestMarkupSell","imageURL","name","email","coins","uploadDate","sendedRequestMarkupBuy","recievedRequestMarkupSell","recievedRequestMarkupBuy","$d2dc34d1259dbf7f$var$sellingSendedRequests","getDocs","collection","uid","forEach","doc","$d2dc34d1259dbf7f$var$buyingSendedRequests","$d2dc34d1259dbf7f$var$sellingRecievedRequests","$d2dc34d1259dbf7f$var$buyingRecievedRequests","$08efb381d751ed9c$export$9099ad97b570f7c","requestMarkupSell","sendTo","sendFrom","requestMarkupBuy","renderSetting","node","controlRequestStatusBuy","handler","addEventListener","e","target","closest","status","dataset","sendto","sendfrom","toDo","todo","parentNode","$2b5f8546824a3db1$var$sellingRequests","$fLfgL","db","$ieZbX","decrypt","$6zTpg","KEY","$2b5f8546824a3db1$var$buyingRequests","$2b5f8546824a3db1$export$d33c8a388e9c2e22","undefined","ref2","getDoc","doc2","Number","calVal","updateDoc","encrypt","deleteDoc","prevCoins","onAuthStateChanged","user","snapshot","coinValue","val","value","$c5492e315016086d$export$dcc00925e4f37222","$d2dc34d1259dbf7f$export$17b0a1b949ecb824","$2b5f8546824a3db1$export$17b0a1b949ecb824","$41eabecbb05f8be2$export$4af819b0d43b9e3d"],"version":3,"file":"History.fb4069af.js.map"}