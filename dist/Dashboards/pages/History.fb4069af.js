var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},s=e.parcelRequire7e89;null==s&&((s=function(e){if(e in t)return t[e].exports;if(e in n){var s=n[e];delete n[e];var a={id:e,exports:{}};return t[e]=a,s.call(a.exports,a,a.exports),a.exports}var d=new Error("Cannot find module '"+e+"'");throw d.code="MODULE_NOT_FOUND",d}).register=function(e,t){n[e]=t},e.parcelRequire7e89=s),s("ac0VL");var a=s("j1HNW"),d=s("avCtq"),i=s("6k2Gr"),o=(a=s("j1HNW"),s("6VvtN")),l=s("58lYo");o=s("6VvtN");const r=a.initializeApp({apiKey:"AIzaSyBKayAlMLGl1ZGSDeQS5ctYu4WZLTp4xoo",authDomain:"leoxi-c5242.firebaseapp.com",projectId:"leoxi-c5242",storageBucket:"leoxi-c5242.appspot.com",messagingSenderId:"898565041070",appId:"1:898565041070:web:4f65a22bd92cb48177363f",measurementId:"G-J4KFEPQF1N"}),c=(d.getAnalytics(r),l.getAuth()),u=i.getFirestore(),g=o.getDatabase();new l.GoogleAuthProvider;l=s("58lYo");s("ac0VL");o=s("6VvtN");const p=async e=>{const t=o.ref(g);return await o.get(o.child(t,e))};s("fLaEZ");i=s("6k2Gr");class m{_userInfo;_coinsInfo;_mod;render(e,t,n){this._mod=n,this._userInfo=e,this._coinsInfo=t,this._renderMarkup()}_renderMarkup(){const e=this._generateMarkup();this.renderClear(),this._parentEl.insertAdjacentHTML("beforeend",e)}_generateMarkup(){}renderSpinner(e){console.log(e),document.querySelector(e).insertAdjacentHTML("afterbegin",' \n     <div class="lds-dual-ring"></div>')}_renderSetting(){}renderMessage(){}renderErrorMessage(){}renderMarkup(){}removeHidden(){this._parentEl.classList.remove("hidden"),console.log(this._parentEl)}addHidden(){this._parentEl.classList.add("hidden"),console.log(this._parentEl)}renderClear(){this._parentEl.innerHTML=""}renderChildClear(){this._parentChildEL.innerHTML=""}}var x=new class extends m{sendedRequestMarkupSell(e){const t=`\n              <tr>\n                        <td>\n                          <div class="d-flex px-2 py-1">\n                            <div>\n                              <img\n                                src="${e.imageURL}"\n                                class="avatar avatar-sm me-3"\n                                alt="user1"\n                              />\n                            </div>\n                            <div\n                              class="d-flex flex-column justify-content-center"\n                            >\n                              <h6 class="mb-0 text-sm">${e.name}</h6>\n                              <p class="text-xs text-secondary mb-0">\n                                ${e.email}\n                              </p>\n                            </div>\n                          </div>\n                        </td>\n                        <td>\n                          <p class="text-xs font-weight-bold mb-0">${e.coins} coins</p>\n                          <p class="text-xs text-secondary mb-0">${e.coins}$</p>\n                        </td>\n                        <td class="align-middle text-center text-sm">\n                          <span class="badge badge-sm bg-gradient-secondary"\n                            >Active</span\n                          >\n                        </td>\n                        <td class="align-middle text-center">\n                          <span class="text-secondary text-xs font-weight-bold"\n                            > ${e.uploadDate}</span\n                          >\n                        </td>\n                        <td class="align-middle">\n                          <a\n                            href="javascript:;"\n                            class="text-secondary font-weight-bold text-xs"\n                            data-toggle="tooltip"\n                            data-original-title="Edit user"\n                          >\n                            Sell\n                          </a>\n                        </td>\n                      </tr>\n        `;document?.querySelector(".sended-requests--sell")?.insertAdjacentHTML("afterbegin",t)}sendedRequestMarkupBuy(e){const t=`\n              <tr>\n                        <td>\n                          <div class="d-flex px-2 py-1">\n                            <div>\n                              <img\n                                src="${e.imageURL}"\n                                class="avatar avatar-sm me-3"\n                                alt="user1"\n                              />\n                            </div>\n                            <div\n                              class="d-flex flex-column justify-content-center"\n                            >\n                              <h6 class="mb-0 text-sm">${e.name}</h6>\n                              <p class="text-xs text-secondary mb-0">\n                                ${e.email}\n                              </p>\n                            </div>\n                          </div>\n                        </td>\n                        <td>\n                          <p class="text-xs font-weight-bold mb-0">${e.coins} coins</p>\n                          <p class="text-xs text-secondary mb-0">${e.coins}$</p>\n                        </td>\n                        <td class="align-middle text-center text-sm">\n                          <span class="badge badge-sm bg-gradient-success"\n                            >Active</span\n                          >\n                        </td>\n                        <td class="align-middle text-center">\n                          <span class="text-secondary text-xs font-weight-bold"\n                            > ${e.uploadDate}</span\n                          >\n                        </td>\n                        <td class="align-middle">\n                          <a\n                            href="javascript:;"\n                            class="text-secondary font-weight-bold text-xs"\n                            data-toggle="tooltip"\n                            data-original-title="Edit user"\n                          >\n                            Buy\n                          </a>\n                        </td>\n                      </tr>\n        `;document?.querySelector(".sended-requests--buy")?.insertAdjacentHTML("afterbegin",t)}recievedRequestMarkupSell(e){const t=`\n              <tr>\n                        <td>\n                          <div class="d-flex px-2 py-1">\n                            <div>\n                              <img\n                                src="${e.imageURL}"\n                                class="avatar avatar-sm me-3"\n                                alt="user1"\n                              />\n                            </div>\n                            <div\n                              class="d-flex flex-column justify-content-center"\n                            >\n                              <h6 class="mb-0 text-sm">${e.name}</h6>\n                              <p class="text-xs text-secondary mb-0">\n                                ${e.email}\n                              </p>\n                            </div>\n                          </div>\n                        </td>\n                        <td>\n                          <p class="text-xs font-weight-bold mb-0">${e.coins} coins</p>\n                          <p class="text-xs text-secondary mb-0">${e.coins}$</p>\n                        </td>\n                        <td class="align-middle text-center text-sm">\n                          <span class="badge badge-sm bg-gradient-secondary"\n                            >Active</span\n                          >\n                        </td>\n                        <td class="align-middle text-center">\n                          <span class="text-secondary text-xs font-weight-bold"\n                            > ${e.uploadDate}</span\n                          >\n                        </td>\n                        <td class="align-middle">\n                          <a\n                            href="javascript:;"\n                            class="text-secondary font-weight-bold text-xs"\n                            data-toggle="tooltip"\n                            data-original-title="Edit user"\n                          >\n                            Sell\n                          </a>\n                        </td>\n                      </tr>\n        `;document?.querySelector(".recieved__requests--sell")?.insertAdjacentHTML("afterbegin",t)}recievedRequestMarkupBuy(e){const t=`\n              <tr>\n                        <td>\n                          <div class="d-flex px-2 py-1">\n                            <div>\n                              <img\n                                src="${e.imageURL}"\n                                class="avatar avatar-sm me-3"\n                                alt="user1"\n                              />\n                            </div>\n                            <div\n                              class="d-flex flex-column justify-content-center"\n                            >\n                              <h6 class="mb-0 text-sm">${e.name}</h6>\n                              <p class="text-xs text-secondary mb-0">\n                                ${e.email}\n                              </p>\n                            </div>\n                          </div>\n                        </td>\n                        <td>\n                          <p class="text-xs font-weight-bold mb-0">${e.coins} coins</p>\n                          <p class="text-xs text-secondary mb-0">${e.coins}$</p>\n                        </td>\n                        <td class="align-middle text-center text-sm">\n                          <span class="badge badge-sm bg-gradient-success"\n                            >Active</span\n                          >\n                        </td>\n                        <td class="align-middle text-center">\n                          <span class="text-secondary text-xs font-weight-bold"\n                            > ${e.uploadDate}</span\n                          >\n                        </td>\n                        <td class="align-middle">\n                          <a\n                            href="javascript:;"\n                            class="text-secondary font-weight-bold text-xs"\n                            data-toggle="tooltip"\n                            data-original-title="Edit user"\n                          >\n                            Buy\n                          </a>\n                        </td>\n                      </tr>\n        `;document?.querySelector(".recieved__requests--buy")?.insertAdjacentHTML("afterbegin",t)}};s("ieZbX"),s("6zTpg"),s("ac0VL");const f=async e=>{(await i.getDocs(i.collection(u,"history","requestSended","sellRequest",e.uid,"requests"))).forEach((e=>{x.sendedRequestMarkupSell(e.data())}))},b=async e=>{(await i.getDocs(i.collection(u,"history","requestSended","buyRequest",e.uid,"requests"))).forEach((e=>{x.sendedRequestMarkupBuy(e.data())}))},v=async e=>{(await i.getDocs(i.collection(u,"history","requestRecieved","sellRequest",e.uid,"requests"))).forEach((e=>{x.recievedRequestMarkupSell(e.data())}))},y=async e=>{(await i.getDocs(i.collection(u,"history","requestRecieved","buyRequest",e.uid,"requests"))).forEach((e=>{x.recievedRequestMarkupBuy(e.data())}))};var h=s("fLfgL");var q=new class extends m{requestMarkupSell(e,t){const n=`\n              <tr>\n                        <td>\n                          <div class="d-flex px-2 py-1">\n                            <div>\n                              <img\n                                src="${e.imageURL}"\n                                class="avatar avatar-sm me-3"\n                                alt="user1"\n                              />\n                            </div>\n                            <div\n                              class="d-flex flex-column justify-content-center"\n                            >\n                              <h6 class="mb-0 text-sm">${e.name}</h6>\n                              \n                            </div>\n                          </div>\n                        </td>\n                        <td>\n                          <p class="text-sm font-weight-bold mb-0">${t}</p>\n                        </td>\n                        <td>\n                          <p class="text-sm font-weight-bold mb-0">${t}$</p>\n                        </td>\n                        <td class="align-middle text-center text-sm">\n                          <span class="badge badge-sm bg-gradient-secondary"\n                            >Active</span\n                          >\n                        </td>\n                        <td class="align-middle text-center">\n                          <span class="text-secondary text-xs font-weight-bold"\n                            > ${e.uploadDate}</span\n                          >\n                        </td>\n                        <td class="align-middle">\n                          <a\n                            href="javascript:;"\n                            class="text-secondary request-status--btn font-weight-bold text-xs"\n                            data-toggle="tooltip"\n                            data-original-title="Edit user"\n                            data-status = "1"\n                            data-sendTo = "${e.sendTo}" \n                            data-sendFrom = "${e.sendFrom}"\n                            data-todo = "requestSell"\n                          >\n                            Accept\n                          </a>\n                        </td>\n                        <td class="align-middle">\n                          <a\n                            href="javascript:;"\n                            class="text-secondary request-status--btn font-weight-bold text-xs"\n                            data-toggle="tooltip"\n                            data-original-title="Edit user"\n                            data-status = "0"\n                            data-sendTo = "${e.sendTo}"\n                            data-sendFrom = "${e.sendFrom}"\n                            data-todo = "requestSell"\n                          >\n                            Reject\n                          </a>\n                        </td>\n                      </tr>\n        `;document?.querySelector(".selling-requests")?.insertAdjacentHTML("afterbegin",n)}requestMarkupBuy(e,t){const n=`\n              <tr>\n                        <td>\n                          <div class="d-flex px-2 py-1">\n                            <div>\n                              <img\n                                src="${e.imageURL}"\n                                class="avatar avatar-sm me-3"\n                                alt="user1"\n                              />\n                            </div>\n                            <div\n                              class="d-flex flex-column justify-content-center"\n                            >\n                              <h6 class="mb-0 text-sm">${e.name}</h6>\n                              \n                            </div>\n                          </div>\n                        </td>\n                         <td>\n                          <p class="text-sm font-weight-bold mb-0">${t}</p>\n                        </td>\n                        <td>\n                          <p class="text-sm font-weight-bold mb-0">${t}$</p>\n                        </td>\n                        <td class="align-middle text-center text-sm">\n                          <span class="badge badge-sm bg-gradient-success"\n                            >Active</span\n                          >\n                        </td>\n                        <td class="align-middle text-center">\n                          <span class="text-secondary text-xs font-weight-bold"\n                            > ${e.uploadDate}</span\n                          >\n                        </td>\n                         <td class="align-middle">\n                          <a\n                            href="javascript:;"\n                            class="text-secondary request-status--btn font-weight-bold text-xs"\n                            data-toggle="tooltip"\n                            data-original-title="Edit user"\n                            data-status = "1"\n                             data-sendTo = "${e.sendTo}"\n                             data-sendFrom = "${e.sendFrom}"\n                             data-todo = "requestBuy"\n                          >\n                            Accept\n                          </a>\n                        </td>\n                        <td class="align-middle">\n                          <a\n                            href="javascript:;"\n                            class="text-secondary request-status--btn font-weight-bold text-xs"\n                            data-toggle="tooltip"\n                            data-original-title="Edit user"\n                            data-status = "0"\n                            data-sendTo = "${e.sendTo}"\n                            data-sendFrom = "${e.sendFrom}"\n                            data-todo = "requestBuy"\n                          >\n                            Reject\n                          </a>\n                        </td>\n                      </tr>\n        `;document?.querySelector(".buying-requests")?.insertAdjacentHTML("afterbegin",n)}renderSetting=e=>{e.remove()};controlRequestStatusBuy=e=>{document.querySelector("body").addEventListener("click",(t=>{t.target.closest(".request-status--btn")&&e({status:t.target.dataset?.status,sendTo:t.target.dataset?.sendto,sendFrom:t.target.dataset?.sendfrom,toDo:t.target.dataset?.todo},t.target.parentNode.parentNode)}))}},w=s("ieZbX"),$=s("6zTpg");s("ac0VL");const S=async e=>{var t=h.collection(h.db,"notifications",e.uid,"requestSell");(await h.getDocs(t)).forEach((e=>{console.log(e.data().coins),q.requestMarkupSell(e.data(),w.decrypt($.KEY,e.data().coins))}))},E=async e=>{var t=h.collection(h.db,"notifications",e.uid,"requestBuy");(await h.getDocs(t)).forEach((e=>{console.log(e.data().coins),q.requestMarkupBuy(e.data(),w.decrypt($.KEY,e.data().coins))}))},M=async(e,t)=>{if(void 0===e.sendFrom&&"undefined"===e.sendFrom&&void 0===e.sendTo&&"undefined"===e.sendTo)return;let n=h.doc(h.db,"userCoins",e.sendTo),s=h.doc(h.db,"notifications",e.sendTo,"requestSell",e.sendFrom);const a=await h.getDoc(n),d=await h.getDoc(s);if(void 0!==a.data()?.coins||null!==a.data().coins||void 0!==d.data()?.coins||null!==d.data().coins)if(Number(e.status)){let n=Number(w.decrypt($.KEY,a.data()?.coins))+Number(w.decrypt($.KEY,d.data()?.coins));await h.updateDoc(h.doc(h.db,"userCoins",e.sendTo),{coins:w.encrypt($.KEY,""+n)}),await h.deleteDoc(s),q.renderSetting(t)}else await h.updateDoc(h.doc(h.db,"userCoins",e.sendTo),{coins:a.data().prevCoins}),await h.deleteDoc(s),q.renderSetting(t)};(async()=>{await l.onAuthStateChanged(c,(e=>{e&&((async e=>{console.log(e.uid);const t=await p("users/"+e.uid),n=await p("coinValue");await p("userHistory/"+e.uid),console.log(n.val().value),n.val().value,t.val().coins})(e),(async e=>{f(e),b(e),v(e),y(e)})(e),(async e=>{S(e),E(e)})(e))}))})(),q.controlRequestStatusBuy(M);
//# sourceMappingURL=History.fb4069af.js.map
